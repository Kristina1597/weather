(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{11:function(e,t,r){e.exports={mainInfo_wrapper:"MainInfo_mainInfo_wrapper__2p17c",mainInfo_block:"MainInfo_mainInfo_block__2_gck",mainInfo_blockWithTemp:"MainInfo_mainInfo_blockWithTemp__1xUGc",mainInfo_temp:"MainInfo_mainInfo_temp__3BHC4",mainInfo_temp_degree:"MainInfo_mainInfo_temp_degree__NWp7y",mainInfo_blockWithDescription:"MainInfo_mainInfo_blockWithDescription__38Vt3",mainInfo_icon:"MainInfo_mainInfo_icon__xZddc"}},2:function(e,t,r){e.exports={unitsForm_wrapper:"Forms_unitsForm_wrapper__5kNv0",unitsForm_degree:"Forms_unitsForm_degree__JSEDE",unitsForm_buttons:"Forms_unitsForm_buttons__3BEYR",unitsForm_button_F:"Forms_unitsForm_button_F__3_pDe",unitsForm_button_C:"Forms_unitsForm_button_C__lXGOP",unitsForm_button_active:"Forms_unitsForm_button_active__ITcba",wrapper:"Forms_wrapper__rOUoa",form_blockWithForm:"Forms_form_blockWithForm__3-HAu",form_openedList:"Forms_form_openedList__2Gu6t",form_blockWithInput:"Forms_form_blockWithInput__rrVtR",form_input:"Forms_form_input__3A-rE",form_button:"Forms_form_button__3XP-1",form_blockWithList:"Forms_form_blockWithList__1stD-",form_listItem:"Forms_form_listItem__1dZ3Z",custom_select_options:"Forms_custom_select_options__TD-PM",hidden_all:"Forms_hidden_all__3XodM"}},23:function(e,t,r){e.exports={appWrapper:"WeatherContainer_appWrapper__2PpaG",appWrapper_rain:"WeatherContainer_appWrapper_rain__3GYTJ",appWrapper_clear:"WeatherContainer_appWrapper_clear__3Pk6o"}},4:function(e,t,r){e.exports={description_wrapper:"Description_description_wrapper__15wUf",description_block:"Description_description_block__2npzd",description_item:"Description_description_item__2VbQS",description_item_name:"Description_description_item_name__16-SB",description_item_value:"Description_description_item_value__17I2S"}},48:function(e,t,r){},7:function(e,t,r){e.exports={headerWrapper:"Header_headerWrapper__1VkeA",header_form:"Header_header_form__2Sb8V",header_form_editState:"Header_header_form_editState__3ttMm",header_cityForm:"Header_header_cityForm__3oqje",header_cityForm_currentCity:"Header_header_cityForm_currentCity__1ziBI",header_cityForm_settings:"Header_header_cityForm_settings__2Jotl",cityForm_changeCityButton:"Header_cityForm_changeCityButton__vPyzd",cityForm_changeMyLocationButton:"Header_cityForm_changeMyLocationButton__14BPg",unitForm:"Header_unitForm__2zFbK",unitForm_mobile:"Header_unitForm_mobile__3oJjy"}},77:function(e,t,r){"use strict";r.r(t);var i=r(1),n=r.n(i),a=r(16),c=r.n(a),o=(r(48),r(17)),s=r(18),d=r(22),u=r(20),_=r(13),l=r(6),p=r(23),m=r.n(p),h=r(15),b=r.n(h),j=r(27),f=r(29),w=r(8),O=r(28),y=r.n(O),v="API_KEY",C=function(e,t,r){return y.a.get("https://api.openweathermap.org/data/2.5/onecall?lat=".concat(e,"&lon=").concat(t,"&exclude=hourly, minutely&appid=").concat(v,"&units=").concat(r,"&lang=ru"))},I=function(e,t){return y.a.get("http://api.openweathermap.org/geo/1.0/reverse?lat=".concat(e,"&lon=").concat(t,"&limit=4&appid=").concat(v))},x="GET_WEATHER",F="CHANGE_UNIT",g="CHANGE_CITY",N="ADD_CITY",k=["metric","imperial"],D=[{id:"vladivostok",name:"\u0412\u043b\u0430\u0434\u0438\u0432\u043e\u0441\u0442\u043e\u043a",lat:43.1056,lon:131.8735,isCurrent:!1},{id:"volgograd",name:"\u0412\u043e\u043b\u0433\u043e\u0433\u0440\u0430\u0434",lat:48.7194,lon:44.5018,isCurrent:!1},{id:"kazan",name:"\u041a\u0430\u0437\u0430\u043d\u044c",lat:55.7887,lon:49.1221,isCurrent:!1},{id:"sochi",name:"\u0421\u043e\u0447\u0438",lat:43.6,lon:39.7303,isCurrent:!1},{id:"krasnoyarsk",name:"\u041a\u0440\u0430\u0441\u043d\u043e\u044f\u0440\u0441\u043a",lat:56.0097,lon:92.7917,isCurrent:!1},{id:"moscow",name:"\u041c\u043e\u0441\u043a\u0432\u0430",lat:55.7522,lon:37.6156,isCurrent:!1},{id:"novosibirsk",name:"\u041d\u043e\u0432\u043e\u0441\u0438\u0431\u0438\u0440\u0441\u043a",lat:55.0415,lon:82.9346,isCurrent:!0},{id:"tyumen",name:"\u0422\u044e\u043c\u0435\u043d\u044c",lat:55.78874,lon:49.12214,isCurrent:!1},{id:"ufa",name:"\u0423\u0444\u0430",lat:54.74306,lon:55.96779,isCurrent:!1}],W=function(e){switch(e){case"cities":return Array.from(D);case"units":return k;case"current":return D.find((function(e){return e.isCurrent}));case"personalLocation":var t=[];return navigator.geolocation.getCurrentPosition((function(e){var r=e.coords.latitude.toFixed(4),i=e.coords.longitude.toFixed(4);t.push(r,i)})),t;default:return}},U={weatherIndicators:{temp:"",weatherMainDescription:"",weatherDescription:"",windSpeed:"",windDirection:"",pressure:"",humidity:"",probabilityPrecipitation:""},cities:W("cities"),units:W("units"),currentCity:W("current"),currentUnit:"metric",localCity:W("personalLocation")},M=function(e){return{type:x,weatherIndicators:e}},E=function(e){return{type:g,city:e}},L=function(e){return{type:N,city:e}},S=function(e,t,r){return function(){var i=Object(j.a)(b.a.mark((function i(n){var a,c;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,C(e,t,r);case 2:a=i.sent,c={temp:a.data.current.temp,weatherMainDescription:a.data.current.weather[0].main,weatherDescription:a.data.current.weather[0].description,windSpeed:a.data.current.wind_speed,windDirection:a.data.current.wind_deg,pressure:a.data.current.pressure,humidity:a.data.current.humidity,probabilityPrecipitation:a.data.daily[0].pop},n(M(c));case 5:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return Object(w.a)(Object(w.a)({},e),{},{weatherIndicators:t.weatherIndicators});case F:return Object(w.a)(Object(w.a)({},e),{},{currentUnit:t.unit});case g:return e.cities.forEach((function(r){r.name!==t.city.name?r.isCurrent=!1:r.isCurrent=!0,r.name===t.city?(e.localCity.isCurrent=!1)&&(r.isCurrent=!0):r.isCurrent=!1})),e.localCity.isCurrent?Object(w.a)(Object(w.a)({},e),{},{cities:Object(f.a)(e.cities),currentCity:t.city}):Object(w.a)(Object(w.a)({},e),{},{cities:Object(f.a)(e.cities),currentCity:e.cities.find((function(e){return e.name===t.city}))});case N:return Object(w.a)(Object(w.a)({},e),{},{localCity:t.city});default:return Object(w.a)({},e)}},H=r(10),B=r(7),P=r.n(B),q=r(2),A=r.n(q),G=r(9),V=r.n(G),J=r(0),R=function(e){var t=Object.values(Object.assign({},e.cities.map((function(e){return e.name})))),r=[],n=Object(i.useState)(e.currentCity.name),a=Object(H.a)(n,2),c=a[0],o=a[1],s=Object(i.useState)(!1),d=Object(H.a)(s,2),u=d[0],_=d[1],p=Object(i.useState)(!1),m=Object(H.a)(p,2),h=m[0],b=m[1],j=Object(i.useState)(""),f=Object(H.a)(j,2),w=f[0],O=f[1],y=function(e){o(e.currentTarget.textContent)};return Object(J.jsxs)("div",{className:V()(A.a.form_blockWithForm,Object(l.a)({},A.a.form_openedList,u)),children:[Object(J.jsxs)("div",{className:A.a.form_blockWithInput,children:[Object(J.jsx)("input",{onChange:function(e){r=[];var i=e.currentTarget.value;b(0!==i.length),_(!0),o(i),t.forEach((function(e){e.toLowerCase().includes(i.toLowerCase())&&r.push(e)})),O(r)},onBlur:function(){_(!1)},onFocus:function(){_(!0)},className:A.a.form_input,type:"text",tabIndex:-1,value:c}),Object(J.jsx)("button",{className:A.a.form_button,onClick:function(t){e.setLocalCityChosen(!1);var r=t.currentTarget.parentElement.children[0].value;e.cities.forEach((function(t){t.name===r&&(e.changeCity(r),e.turnOffEditMode())}))},children:"OK"})]}),Object(J.jsx)("div",{className:V()(A.a.form_blockWithList,Object(l.a)({},A.a.hidden_all,!u)),children:h?w.map((function(e){return Object(J.jsx)("div",{tabIndex:10,className:A.a.form_listItem,onMouseDown:y,children:e},e.key)})):t.map((function(e){return Object(J.jsx)("div",{tabIndex:10,className:A.a.form_listItem,onMouseDown:y,children:e},e.key)}))})]})},z=function(e){var t=function(t){var r=t.currentTarget.attributes.value.nodeValue;e.changeUnit(r)};return Object(J.jsxs)("div",{className:A.a.unitsForm_wrapper,children:[Object(J.jsx)("div",{className:A.a.unitsForm_degree,children:"\xb0 "}),Object(J.jsxs)("div",{className:A.a.unitsForm_buttons,children:[Object(J.jsx)("div",{className:V()(A.a.unitsForm_button_F,Object(l.a)({},A.a.unitsForm_button_active,"imperial"===e.currentUnit)),onClick:t,value:"imperial",children:Object(J.jsx)("div",{children:"F"})}),Object(J.jsx)("div",{className:V()(A.a.unitsForm_button_C,Object(l.a)({},A.a.unitsForm_button_active,"metric"===e.currentUnit)),onClick:t,value:"metric",children:Object(J.jsx)("div",{children:"C"})})]})]})},X=r(21),Y=r.p+"static/media/location.2dfb72ad.svg",K=function(e){var t=Object(i.useState)(!1),r=Object(H.a)(t,2),n=r[0],a=r[1],c=Object(i.useState)(!1),o=Object(H.a)(c,2),s=o[0],d=o[1];return Object(J.jsx)("div",{className:P.a.headerWrapper,children:n?Object(J.jsx)("div",{className:P.a.header_form,children:Object(J.jsxs)("div",{className:P.a.header_form_editState,children:[Object(J.jsx)(R,{isEditMode:n,turnOffEditMode:function(){a(!1)},requestWeather:e.requestWeather,localCity:e.localCity,isLocalCityChosen:s,setLocalCityChosen:d,changeCity:e.changeCity,cities:e.cities,currentCity:e.currentCity}),Object(J.jsx)("div",{className:V()(P.a.unitForm,Object(l.a)({},P.a.unitForm_mobile,n)),children:Object(J.jsx)(z,{requestWeather:e.requestWeather,currentUnit:e.currentUnit,changeUnit:e.changeUnit})})]})}):Object(J.jsxs)("div",{className:P.a.header_form,children:[Object(J.jsxs)("div",{className:P.a.header_cityForm,children:[Object(J.jsx)("div",{className:P.a.header_cityForm_currentCity,children:s?e.localCity.name:e.currentCity.name}),Object(J.jsx)("div",{className:P.a.unitForm,children:Object(J.jsx)(z,{requestWeather:e.requestWeather,currentUnit:e.currentUnit,changeUnit:e.changeUnit})})]}),Object(J.jsxs)("div",{className:P.a.header_cityForm_settings,children:[Object(J.jsx)("button",{className:P.a.cityForm_changeCityButton,onClick:function(){a(!0)},children:"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0433\u043e\u0440\u043e\u0434"}),Object(J.jsxs)("button",{onClick:function(){e.localCity&&e.localCity.length>=2?e.addLocalCity(e.localCity[0],e.localCity[1],e.currentUnit):e.addLocalCity(e.localCity.lat,e.localCity.lon,e.currentUnit),d(!0)},className:P.a.cityForm_changeMyLocationButton,children:[Object(J.jsx)(X.a,{src:Y}),"\u041c\u043e\u0435 \u043c\u0435\u0441\u0442\u043e\u043f\u043e\u043b\u043e\u0436\u0435\u043d\u0438\u0435"]})]})]})})},Z=r(11),Q=r.n(Z),$=r(4),ee=r.n($),te=function(e){var t;(0<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=23||337<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=360)&&(t="\u0421\u0435\u0432\u0435\u0440\u043d\u044b\u0439"),24<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=68&&(t="\u0421\u0435\u0432\u0435\u0440\u043e-\u0432\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0439"),69<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=113&&(t="\u0412\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0439"),114<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=158&&(t="\u042e\u0433\u043e-\u0432\u043e\u0441\u0442\u043e\u0447\u043d\u044b\u0439"),159<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=203&&(t="\u042e\u0436\u043d\u044b\u0439"),204<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=248&&(t="\u042e\u0433\u043e-\u0437\u0430\u043f\u0430\u0434\u043d\u044b\u0439"),249<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=293&&(t="\u0417\u0430\u043f\u0430\u0434\u043d\u044b\u0439"),294<=e.weatherIndicators.windDirection&&e.weatherIndicators.windDirection<=336&&(t="\u0421\u0435\u0432\u0435\u0440\u043e-\u0437\u0430\u043f\u0430\u0434\u043d\u044b\u0439");var r="metric"===e.currentUnit?" \u043c/\u0441, ":" \u043c\u0438\u043b\u044c/\u0447, ";return Object(J.jsxs)("div",{className:ee.a.description_wrapper,children:[Object(J.jsxs)("div",{className:ee.a.description_block,children:[Object(J.jsxs)("div",{className:ee.a.description_item,children:[Object(J.jsx)("div",{className:ee.a.description_item_name,children:"\u0412\u0435\u0442\u0435\u0440"}),Object(J.jsx)("div",{className:ee.a.description_item_value,children:e.weatherIndicators.windSpeed+r+t})]}),Object(J.jsxs)("div",{className:ee.a.description_item,children:[Object(J.jsx)("div",{className:ee.a.description_item_name,children:"\u0414\u0430\u0432\u043b\u0435\u043d\u0438\u0435"}),Object(J.jsx)("div",{className:ee.a.description_item_value,children:e.weatherIndicators.pressure+" \u043c\u043c \u0440\u0442. \u0441\u0442."})]})]}),Object(J.jsxs)("div",{className:ee.a.description_block,children:[Object(J.jsxs)("div",{className:ee.a.description_item,children:[Object(J.jsx)("div",{className:ee.a.description_item_name,children:"\u0412\u043b\u0430\u0436\u043d\u043e\u0441\u0442\u044c"}),Object(J.jsx)("div",{className:ee.a.description_item_value,children:e.weatherIndicators.humidity+"%"})]}),Object(J.jsxs)("div",{className:ee.a.description_item,children:[Object(J.jsx)("div",{className:ee.a.description_item_name,children:"\u0412\u0435\u0440\u043e\u044f\u0442\u043d\u043e\u0441\u0442\u044c \u0434\u043e\u0436\u0434\u044f"}),Object(J.jsx)("div",{className:ee.a.description_item_value,children:Math.round(100*e.weatherIndicators.probabilityPrecipitation)+"%"})]})]})]})},re=r.p+"static/media/cloud.537bf324.svg",ie=r.p+"static/media/partlyCloudy.bd05e8ee.svg",ne=r.p+"static/media/rain.6db22cb2.svg",ae=r.p+"static/media/storm.8596a268.svg",ce=r.p+"static/media/sun.5f4a8e48.svg",oe=r.p+"static/media/mist.45f5c3f3.svg",se=r.p+"static/media/snowy.b7b18d18.svg",de=function(e){var t;switch(e.weatherIndicators.weatherMainDescription){case"Clouds":t="\u043e\u0431\u043b\u0430\u0447\u043d\u043e \u0441 \u043f\u0440\u043e\u044f\u0441\u043d\u0435\u043d\u0438\u044f\u043c\u0438"===e.weatherIndicators.weatherDescription?ie:re;break;case"Rain":t=ne;break;case"Thunderstorm":t=ae;break;case"Clear":t=ce;break;case"Mist":t=oe;break;case"Snow":t=se}return Object(J.jsxs)("div",{className:Q.a.mainInfo_wrapper,children:[Object(J.jsxs)("div",{className:Q.a.mainInfo_block,children:[Object(J.jsxs)("div",{className:Q.a.mainInfo_blockWithTemp,children:[Object(J.jsx)("div",{className:Q.a.mainInfo_icon,children:Object(J.jsx)(X.a,{src:t})}),Object(J.jsxs)("div",{className:Q.a.mainInfo_temp,children:[Math.round(e.weatherIndicators.temp),Object(J.jsx)("span",{className:Q.a.mainInfo_temp_degree,children:"o"})]})]}),Object(J.jsx)("div",{className:Q.a.mainInfo_blockWithDescription,children:e.weatherIndicators.weatherDescription.charAt(0).toUpperCase()+e.weatherIndicators.weatherDescription.slice(1)})]}),Object(J.jsx)(te,{currentUnit:e.currentUnit,weatherIndicators:e.weatherIndicators})]})},ue=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"componentDidMount",value:function(){this.props.requestWeather(this.props.store.currentCity.lat,this.props.store.currentCity.lon,this.props.store.currentUnit)}},{key:"componentDidUpdate",value:function(e,t,r){this.props.store.currentCity.id===e.store.currentCity.id&&this.props.store.currentUnit===e.store.currentUnit||this.props.requestWeather(this.props.store.currentCity.lat,this.props.store.currentCity.lon,this.props.store.currentUnit)}},{key:"render",value:function(){return Object(J.jsxs)("div",{className:V()(m.a.appWrapper,Object(l.a)({},m.a.appWrapper_clear,"Clear"===this.props.weatherIndicators.weatherMainDescription),Object(l.a)({},m.a.appWrapper_rain,"Rain"===this.props.weatherIndicators.weatherMainDescription)),children:[Object(J.jsx)(K,{currentUnit:this.props.currentUnit,currentCity:this.props.currentCity,cities:this.props.cities,localCity:this.props.localCity,requestWeather:this.props.requestWeather,changeUnit:this.props.changeUnit,changeCity:this.props.changeCity,addLocalCity:this.props.addLocalCity}),Object(J.jsx)(de,{currentUnit:this.props.currentUnit,weatherIndicators:this.props.weatherIndicators})]})}}]),r}(n.a.Component),_e=Object(_.b)((function(e){return{currentUnit:e.weather.currentUnit,currentCity:e.weather.currentCity,cities:e.weather.cities,weatherIndicators:e.weather.weatherIndicators,localCity:e.weather.localCity}}),(function(e){return{requestWeather:function(t,r,i){e(S(t,r,i))},changeUnit:function(t){e(function(e){return{type:F,unit:e}}(t))},changeCity:function(t){e(E(t))},addLocalCity:function(t,r,i){e(function(e,t,r){return function(){var i=Object(j.a)(b.a.mark((function i(n){var a,c;return b.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,I(e,t);case 2:a=i.sent,c={id:a.data[3].local_names.id,name:a.data[3].local_names.ru,lat:a.data[3].lat,lon:a.data[3].lon,isCurrent:!0},n(L(c)),n(E(c)),n(S(e,t,r));case 7:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}()}(t,r,i))}}}))(ue),le=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){return Object(o.a)(this,r),t.apply(this,arguments)}return Object(s.a)(r,[{key:"render",value:function(){return Object(J.jsx)(_e,{store:this.props.store})}}]),r}(i.Component),pe=Object(_.b)((function(e){return{store:e.weather}}))(le),me=r(12),he=r(43),be=Object(me.c)({weather:T}),je=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||me.d,fe=Object(me.e)(be,je(Object(me.a)(he.a)));window.__store__=fe;var we=fe;c.a.render(Object(J.jsx)(n.a.StrictMode,{children:Object(J.jsx)(_.a,{store:we,children:Object(J.jsx)(pe,{})})}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.ce2792b6.chunk.js.map